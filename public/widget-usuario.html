<div id="widget-usuarios">
    <h2>Listado de amigos</h2>
    <input type="text" class="form-control" placeholder="Filtrar por email"
           id="filtro-email" name="busqueda"/>
    <table class="table table-hover">
        <thead>
        <tr>
            <th>Email</th>
            <th class="col-md-1"></th>
        </tr>
        </thead>
        <tbody id="tablaCuerpo">

        </tbody>
    </table>
    <button onclick="cargarAmigos()" class="btn btn-primary">Actualizar</button>
</div>

<script>

    var flag;
    function widgetUsuarios() {
        $("#contenedor-principal").load("widget-usuarios.html");
        flag=false;
    }



    function actualizarTablaMensajes(monstrarMensajes) {
        $("#tablaMensajes").empty(); // Vaciar la tabla
        for (i = 0; i < monstrarMensajes.length; i++) {

            var linea = "<td>" + monstrarMensajes[i].texto + "</td>";
            $("#tablaMensajes").append(
                "<tr id="+ monstrarMensajes[i]._id+">" + linea + "</tr>");
        }
    }

    var mensajes;
    function cargarMensajes(amigo) {
        $("#contenedor-principal").load("widget-mensajes.html");
        $.ajax({
            url : URLbase + "/mensajes/" + amigo,
            type : "GET",
            data : {},
            dataType : 'json',
            headers : {
                "token" : token
            },
            success : function(respuesta) {
                mensajes = respuesta;
                actualizarTablaMensajes(mensajes);
                $("#mensajesCon").text(amigo);
                flag=true;
            },
            error : function(error) {
                clearInterval(intervalMId);
                $("#contenedor-principal").load("widget-login.html");
            }
        });
    }



</script>
